<div class="section players">
  <div class="area">
    <div class="mat-subheading-1 header">Players</div>
    <div class="entity-container">
      <app-player
        appTargetable
        *ngFor="let player of players"
        [entityId]="player.id"
        [player]="player"
        [canAct]="canAct"
      ></app-player>
    </div>
  </div>
</div>
<mat-divider [vertical]="true"></mat-divider>
<div class="section forge">
  <div class="area">
    <div class="mat-subheading-1 header">
      Forge
      <span *ngIf="throneActive" class="throne-active">
        Throne active
      </span>
    </div>
    <div class="entity-container">
      <div *ngFor="let group of forgeGroups" class="forge-group">
        <app-card
          appTargetable
          [entityId]="group.card.id"
          [card]="group.card"
          [canAct]="canAct"
        ></app-card>
        <div>{{ group.count }} remaining</div>
      </div>
    </div>
    <mat-divider class="forge-separator"></mat-divider>
    <div class="entity-container">
      <app-card
        appTargetable
        *ngFor="let card of forge"
        [entityId]="card.id"
        [card]="card"
        [canAct]="canAct"
      ></app-card>
    </div>
  </div>
</div>
<mat-divider [vertical]="true"></mat-divider>
<div class="section main">
  <div class="area" *ngIf="previousPlayerName">
    <div class="mat-subheading-1 header">
      Attacking Units - {{ previousPlayerName }}
    </div>
    <div class="entity-container">
      <app-unit
        class="attacking"
        appTargetable
        *ngFor="let unit of attackingUnits"
        [entityId]="unit.id"
        [unit]="unit"
        [canAct]="canAct"
      ></app-unit>
      <div *ngIf="attackingUnits.length == 0" class="mat-subheading-2">
        No attacking units
      </div>
    </div>
  </div>
  <mat-divider></mat-divider>
  <div class="area play-area">
    <div class="mat-subheading-1 header">
      Play Area - {{ currentPlayerName }}
    </div>
    <div class="entity-container">
      <app-unit
        class="defending"
        appTargetable
        *ngFor="let unit of defendingUnits"
        [entityId]="unit.id"
        [unit]="unit"
        [canAct]="canAct"
      ></app-unit>
      <app-card
        appTargetable
        *ngFor="let card of playArea"
        [entityId]="card.id"
        [card]="card"
        [canAct]="canAct"
      ></app-card>
      <div
        *ngIf="defendingUnits.length == 0 && playArea.length == 0"
        class="mat-subheading-2"
      >
        Nothing played yet
      </div>
    </div>
  </div>
  <mat-divider></mat-divider>
  <div class="area">
    <div class="mat-subheading-1 header">Current Hand</div>
    <div class="entity-container">
      <app-card
        class="hand"
        appTargetable
        *ngFor="let card of hand"
        [entityId]="card.id"
        [card]="card"
        [canAct]="canAct"
      ></app-card>
      <div *ngIf="hand.length == 0" class="mat-subheading-2">
        Empty
      </div>
    </div>
  </div>
  <mat-divider></mat-divider>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Discard Pile ({{ discardPile.length }})
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="entity-container discard-container">
      <app-card
        class="discard-pile"
        appTargetable
        *ngFor="let card of discardPile"
        [entityId]="card.id"
        [card]="card"
        [canAct]="canAct"
      ></app-card>
    </div>
  </mat-expansion-panel>
</div>
